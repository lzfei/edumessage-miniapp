webpackJsonp([5],{262:function(e,t,n){"use strict";function a(e){l||(n(824),n(826))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(460),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);var s=n(828),c=n.n(s),l=!1,d=n(3),u=a,p=d(i.a,c.a,!1,u,null,null);p.options.__file="src/views/teacher/teacher.vue",t.default=p.exports},460:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(99),i=a(r),o=n(100),s=a(o),c=n(9),l=a(c),d=n(98);t.default={name:"teacher_index",data:function(){var e=this;return{addModal:!1,modal:{visible:!1},loading:!1,index:1,teacher:{name:"",good:"",score:"4.8",tag1:"",tag2:"",time:"",category:[],coordinate:"",coordinates:[]},teacherValidate:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],good:[{required:!0,message:"请输入擅长科目",trigger:"blur"},{type:"string",max:20,message:"不能超过20个字符",trigger:"blur"}],tag1:[{required:!0,message:"请输入标签1",trigger:"blur"}],tag2:[{required:!0,message:"请输入标签2",trigger:"blur"}],time:[{required:!0,message:"请输入开始从教年份",trigger:"blur"}],category:[{required:!0,type:"array",min:1,message:"请选择类型",trigger:"blur"}],_coordinate:[{required:!0,message:"请输入坐标",trigger:"blur"}]},editInlineColumns:[{title:"序号",type:"index",width:60,align:"center"},{title:"姓名",align:"center",key:"name",width:250,editable:!0},{title:"擅长",align:"center",key:"good",editable:!0},{title:"标签1",align:"center",key:"tag1",editable:!0,width:100},{title:"标签2",align:"center",key:"tag2",editable:!0,width:100},{title:"评分",align:"center",key:"score",width:70},{title:"从教年份",align:"center",key:"time",editable:!0,width:90},{title:"操作",align:"center",width:190,key:"handle",render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.editClick(n)}}},"修改"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(n)}}},"删除")])}},{title:"详情",width:70,key:"show_more",align:"center",render:function(t,n){return t("Button",{props:{type:"text",size:"small"},on:{click:function(){var t={_id:n.row._id};e.$router.push({name:"teacher_info",params:t})}}},"详情")}}],editInlineData:[],currentPage:1,totalCount:0,limit:5,offset:0,isEdit:!1}},computed:{},methods:{initData:function(){this.teacher={name:"",good:"",score:"4.8",tag1:"",tag2:"",time:"",category:[],coordinate:"",coordinates:[]}},getData:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getTeacherList)({limit:this.limit,offset:this.offset});case 2:t=e.sent,this.editInlineData=t.data;case 4:case"end":return e.stop()}},e,this)}));return e}(),getTeacherCount:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getTeacherCount)();case 2:t=e.sent,this.totalCount=t.count;case 4:case"end":return e.stop()}},e,this)}));return e}(),addClick:function(){this.isEdit=!1,this.modal.visible=!0},modalOk:function(){this.isEdit?this.edit():this.save()},modalCancel:function(){this.modal.visible=!1,this.$refs.teacherForm.resetFields(),this.getTeacherCount(),this.getData(),this.initData()},save:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(i.default.mark(function e(){var t,n,a=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n=l.default.get("_id"),this.$refs.teacherForm.validate(function(){var e=(0,s.default)(i.default.mark(function e(n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return t.teacher.coordinates=t.teacher.coordinate.split(",").reverse(),e.next=4,(0,d.teacherInfo)(t.teacher);case 4:r=e.sent,1===r.status?(t.modal.visible=!1,t.$Message.success("添加成功!"),t.getTeacherCount(),t.getData(),t.initData()):t.$Message.error(r.message);case 6:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return e}(),cancel:function(){_t.initData()},getNextpage:function(e){this.currentPage=e,this.offset=(this.currentPage-1)*this.limit,this.getData()},editClick:function(e){this.isEdit=!0,this.teacher=e.row;var t=e.row.coordinates.reverse();this.teacher.coordinate=t[0]+","+t[1],this.modal.visible=!0},edit:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(i.default.mark(function e(){var t,n=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,this.$refs.teacherForm.validate(function(){var e=(0,s.default)(i.default.mark(function e(a){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,(0,d.updateTeacher)(n.teacher);case 3:r=e.sent,1===r.status?(t.modal.visible=!1,t.$Message.success("修改成功!"),t.getTeacherCount(),t.getData(),t.initData()):t.$Message.error(r.message);case 5:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return e}(),remove:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,(0,d.removeTeacher)({_id:t.row._id});case 3:n=e.sent,1===n.status&&(this.$Message.success(n.message),this.getTeacherCount(),this.getData());case 5:case"end":return e.stop()}},e,this)}));return e}(),handleSearch:function(){},handleCancel:function(){},refresh:function(){this.getTeacherCount(),this.getData()}},created:function(){this.getTeacherCount(),this.getData()}}},824:function(e,t,n){var a=n(825);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(15)("70996416",a,!1,{})},825:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.image-editor .cropper {\n  box-sizing: border-box;\n  border: 1px solid #c3c3c3;\n  width: 100%;\n  height: 100%;\n}\n.image-editor .cropper img {\n  max-height: 100%;\n}\n.image-editor .cropper-container {\n  width: 261px!important;\n  height: 276px!important;\n}\n.image-editor .cropper-crop-box {\n  width: 174px!important;\n  height: 184px!important;\n}\n.image-editor .fileinput {\n  display: none;\n}\n.image-editor .filelabel {\n  display: block;\n  padding: 6px 15px;\n  background: #2d8cf0;\n  display: inline-block;\n  border: 1px solid #2d8cf0;\n  border-radius: 4px;\n  cursor: pointer;\n  color: white;\n  font-size: 12px;\n  text-align: center;\n  transition: all .2s;\n}\n.image-editor .filelabel:hover {\n  background: #5cadff;\n  border: 1px solid #5cadff;\n  transition: all .2s;\n}\n.image-editor-con {\n  height: 276px;\n  width: 261px!important;\n}\n.image-editor-con-preview-con {\n  width: 174px !important;\n  height: 184px !important;\n  border: 1px solid #c3c3c3;\n}\n.image-editor-con-preview-con #preview {\n  width: 174px;\n  height: 184px;\n  overflow: hidden;\n}\n",""])},826:function(e,t,n){var a=n(827);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(15)("1e0e3a7c",a,!1,{})},827:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"\n.vertical-center-modal {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: center;\n      justify-content: center;\n}\n.ivu-modal {\n  top: 0;\n}\n.page {\n    display: inline-block;\n    float: right;\n}\n",""])},828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"teacher"},[n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"ios-list-outline"}}),e._v("\n                    老师列表\n                ")],1),e._v(" "),n("Row",[n("Button",{attrs:{icon:"loop"},on:{click:e.refresh}},[e._v("刷新")]),e._v(" "),n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名搜搜..."}}),e._v(" "),n("span",{staticStyle:{margin:"0 10px"},on:{click:e.handleSearch}},[n("Button",{attrs:{type:"primary",icon:"search"}},[e._v("搜索")])],1),e._v(" "),n("Button",{attrs:{icon:"android-add-circle"},on:{click:e.addClick}},[e._v("新增")]),e._v(" "),n("Modal",{attrs:{title:"新增老师","class-name":"vertical-center-modal"},model:{value:e.modal.visible,callback:function(t){e.$set(e.modal,"visible",t)},expression:"modal.visible"}},[n("Form",{ref:"teacherForm",attrs:{model:e.teacher,rules:e.teacherValidate,"label-width":80}},[n("FormItem",{attrs:{label:"姓名",prop:"name"}},[n("Input",{attrs:{placeholder:"老师姓名"},model:{value:e.teacher.name,callback:function(t){e.$set(e.teacher,"name",t)},expression:"teacher.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:"擅长科目",prop:"good"}},[n("Input",{attrs:{placeholder:"擅长科目 如：英语、奥数"},model:{value:e.teacher.good,callback:function(t){e.$set(e.teacher,"good",t)},expression:"teacher.good"}})],1),e._v(" "),n("FormItem",{attrs:{label:"标签1",prop:"tag1"}},[n("Input",{attrs:{placeholder:"标签 如：门类齐全"},model:{value:e.teacher.tag1,callback:function(t){e.$set(e.teacher,"tag1",t)},expression:"teacher.tag1"}})],1),e._v(" "),n("FormItem",{attrs:{label:"标签2",prop:"tag2"}},[n("Input",{attrs:{placeholder:"标签 如：师资保障"},model:{value:e.teacher.tag2,callback:function(t){e.$set(e.teacher,"tag2",t)},expression:"teacher.tag2"}})],1),e._v(" "),n("FormItem",{attrs:{label:"开始教学年份",prop:"time"}},[n("Input",{attrs:{placeholder:"开始教学年份 如：2005"},model:{value:e.teacher.time,callback:function(t){e.$set(e.teacher,"time",t)},expression:"teacher.time"}})],1),e._v(" "),n("FormItem",{attrs:{label:"机构类别",prop:"category"}},[n("CheckboxGroup",{model:{value:e.teacher.category,callback:function(t){e.$set(e.teacher,"category",t)},expression:"teacher.category"}},[n("Checkbox",{attrs:{label:"0"}},[e._v("综合")]),e._v(" "),n("Checkbox",{attrs:{label:"1"}},[e._v("文化课老师")]),e._v(" "),n("Checkbox",{attrs:{label:"2"}},[e._v("兴趣班老师")]),e._v(" "),n("Checkbox",{attrs:{label:"3"}},[e._v("素质培养老师")]),e._v(" "),n("Checkbox",{attrs:{label:"4"}},[e._v("家庭教育老师")])],1)],1),e._v(" "),n("FormItem",{attrs:{label:"坐标",prop:"coordinate"}},[n("Input",{attrs:{placeholder:"坐标"},model:{value:e.teacher.coordinate,callback:function(t){e.$set(e.teacher,"coordinate",t)},expression:"teacher.coordinate"}}),e._v(" "),n("a",{attrs:{href:"http://lbs.qq.com/tool/getpoint/index.html",target:"_blank"}},[e._v("获取坐标")])],1)],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text",size:"large"},on:{click:e.modalCancel}},[e._v("取消")]),e._v(" "),n("Button",{attrs:{type:"primary",size:"large"},on:{click:e.modalOk}},[e._v("确定")])],1)],1),e._v(" "),n("Page",{staticClass:"page",attrs:{current:e.currentPage,total:e.totalCount,"page-size":e.limit,simple:""},on:{"on-change":e.getNextpage}})],1),e._v(" "),n("Row",{staticClass:"margin-top-10 searchable-table-con1"},[n("div",{staticClass:"edittable-table-height-con"},[n("Table",{attrs:{border:"",columns:e.editInlineColumns,data:e.editInlineData}})],1)])],1)],1)],1)],1)},r=[];a._withStripped=!0;var i={render:a,staticRenderFns:r};t.default=i}});